
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Glossay</title>

    <style>
		
		@media screen {
			.cpcover { display: none; }
		}

		body { color: #444; font-family: helvetica; }

		.cpcover { position: absolute; right: 0; font-size: 3em; padding: 10px; }

		.glossary { 
			position: relative;
			overflow: hidden;
		}

		.glossary-border { 
			position: absolute;
			top: 0;
			bottom: 0;
			box-shadow: -5px 0 5px -5px #333;
			/* height: 100%; */
			width: 30px;
			/* background: red; */
			margin-left: 42px;
		}

		.glossary-labels { 
			float: left; 
			padding: 5px 0;
			/*border-right: solid 1px #eee;*/
			/*box-shadow: 5px 0 5px -5px #333;*/
		}

		.glossary-labels a {
			display: block; 
			width: 40px; 
			height: 30px; 
			line-height: 30px; 
			text-align: center; 
			margin-top: 4px; 
			margin-left: 0px;
			text-decoration: none; 
			color: #333; 
			border-left: solid 1px #ddd; 
			border-top: solid 1px #ddd; 
			border-bottom: solid 1px #ddd; 
			border-radius: 4px 0px 0px 4px;
			-webkit-transition: background-color .7s;
			transition: background-color .7s;
		}

		.glossary-labels a:hover {
			width: 36px;
			margin-left: 4px;
		}

		.glossary-labels .glossary-selected {
			background-color: #333;
			color: #fff;
		}

		.glossary-content { 
			/*max-width: 600px;*/
			min-height: 300px;
			/*float: left; */
			padding: 4px;
			/*box-shadow: -5px 0 5px -5px #333;*/
			padding-left: 10px;
			margin-left: 41px;
			line-height: 1.6em;
			position: relative;
		}

		.glossary-content .glossary-title {
			font-weight: 700;
		}

		.glossary-content .glossary-more {
			font-size: 0.8em;
			margin-right: 4px;
		}

		.glossary-content .glossary-key {
			font-size: 0.8em;
			display: block;
			width: 20px;
			text-align: center;
			margin: 0 auto;
		}

		.glossary-single .glossary-key {
			display: none;
		}

		.glossary-content .glossary-key-section {
			border-bottom: solid 1px #eee;
			padding: 10px;
		}

		.solutions {
			/*width: 100%;*/
			height: auto;
			float: left;
			margin: 0 40px;
		}

		.cover_bkg {
			position: relative;
			float: left;
			width: 100%;
			height: 400px;
			margin: 40px 0 40px 0;
			background: no-repeat center center;
			background: url(bg.jpg) no-repeat center center fixed;
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
			overflow: hidden;
		}

		html, body {
			margin: 0;
			padding: 0;
			border: 0;
			font-size: 100%;
			vertical-align: baseline;
		}

		/** s2 **/

		.s2 .glossary-labels a {
			display: block;
			width: 40px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			margin-top: -6px;
			margin-left: 0px;
			text-decoration: none;
			color: #333;
			border-left: solid 1px #ddd;
			border-top: solid 1px #ddd;
			border-bottom: solid 1px #ddd;
			border-radius: 11px 0px 0px 3px;
			-webkit-transition: background-color .7s;
			transition: background-color .7s;
			background: #fff;
		}

		.s2 .glossary-labels a:hover {
			margin-top: -8px;
			height: 32px;
			font-size: 1.2em;
		}

		.s2 .glossary-labels a:first-child,
		.s2 .glossary-labels a:first-child:hover {
			margin-top: 0;
			font-size: 1em;
			height: 30px;
		}

		.s2 .glossary-labels .glossary-selected {
			background-color: #333;
			color: #fff;
		}		

    </style>
  </head>

  <body>
  	<span class="cpcover">www.zucchetti.it</span>

  	<div class="solutions">
  		<h1>Zucchetti</h1>
  	</div>

	<div class="cover_bkg"> </div>

	<div class="solutions">

	  	<p>prima <a href="#" onclick="$('.glossary').toggleClass('s2'); return false;">toggle s2</a></p>

		<div class="glossary s2">
			<div class="glossary-border"></div>
			<div class="glossary-labels"></div>
			<div class="glossary-content"></div>
			
		</div>
		<div style="clear:both"></div>

		<p>dopo</p>

	</div>

	<div class="cover_bkg" style="background-image:url(02166_endeavourslaunch_1920x1080.jpg)"> </div>

	<div class="solutions">
		<p>Quisque sagittis arcu sed dui tincidunt aliquet. Quisque eu ante nec ipsum tempor ultricies eget eu quam. Quisque mollis interdum enim, a facilisis ligula lacinia ac. In lacus lacus, tincidunt ut scelerisque a, tempor et massa. Donec eros ligula, rutrum sit amet risus vitae, accumsan porttitor velit. Vivamus non consectetur justo. Sed lacinia ipsum vel nisl condimentum sodales.</p>
	</div>

    <script src="jquery-1.11.1.min.js"></script>
    <script>

		var data = {
			'A': {
				'a': {
					caption: 'azioni',
					description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a nulla a arcu vulputate gravida. Nullam pharetra non nisl ornare aliquam.',
					ref: [ ['146', 'costruzione elemento'], ['99', 'pseudo codice'] ]
				},
				'append': {
					caption: '',
					description: 'Quisque sagittis arcu sed dui tincidunt aliquet. Quisque eu ante nec ipsum tempor ultricies eget eu quam. Quisque mollis interdum enim, a facilisis ligula lacinia ac. In lacus lacus, tincidunt ut scelerisque a, tempor et massa. Donec eros ligula, rutrum sit amet risus vitae, accumsan porttitor velit. Vivamus non consectetur justo. Sed lacinia ipsum vel nisl condimentum sodales.',
					ref: [ ['146', 'costruzione elemento'], ['99', 'pseudo codice'] ]
				}
			},
			'B': {
				'bottom': {
					caption: 'bottom bounds',
					description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a nulla a arcu vulputate gravida. Nullam pharetra non nisl ornare aliquam.',
					ref: [ ['146', 'costruzione elemento'], ['99', 'pseudo codice'] ]
				},
				'bundle': {
					caption: '',
					description: 'Quisque sagittis arcu sed dui tincidunt aliquet. Quisque eu ante nec ipsum tempor ultricies eget eu quam. Quisque mollis interdum enim, a facilisis ligula lacinia ac. In lacus lacus, tincidunt ut scelerisque a, tempor et massa. Donec eros ligula, rutrum sit amet risus vitae, accumsan porttitor velit. Vivamus non consectetur justo. Sed lacinia ipsum vel nisl condimentum sodales.',
					ref: [ ['146', 'costruzione elemento'], ['99', 'pseudo codice'] ]
				}
			},				
			'R': {
				'round': {
					caption: '',
					description: 'Quisque congue orci dolor, et convallis magna luctus sit amet. Nam eros felis, ultricies vel mauris sit amet, consectetur porttitor odio. Maecenas porttitor mattis augue at bibendum. Pellentesque ultrices, erat id ornare tristique, lectus neque ultricies odio, in venenatis diam turpis sit amet arcu.',
					ref: [ ['99', 'pseudo codice'] ]
				}
			},
			'%': {
				'%': {
					caption: 'percentuale',
					description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed accumsan felis vel condimentum adipiscing. Nullam lobortis vehicula est, rhoncus aliquet magna luctus non.',
					ref: [ ['146', 'costruzione elemento'], ['99', 'pseudo codice'] ]
				}
			}
		};

		// data = {};
		// var aa = "ABCDEFGHIJKLMNOPQRSTUVWXYZ%".split("");
		// for (var ii=0; ii<aa.length; ii++) {
		// 	var label = aa[ii];
		// 	data[label] = {};
		// 	data[label]['voce_' + label] = {
		// 		caption: '',
		// 		description: 'Quisque sagittis arcu sed dui tincidunt aliquet. Quisque eu ante nec ipsum tempor ultricies eget eu quam. Quisque mollis interdum enim, a facilisis ligula lacinia ac. In lacus lacus, tincidunt ut scelerisque a, tempor et massa. Donec eros ligula, rutrum sit amet risus vitae, accumsan porttitor velit. Vivamus non consectetur justo. Sed lacinia ipsum vel nisl condimentum sodales.'
		// 	};
		// }

		function getGlossaryLabels() {
			//TODO leggere etichette via ajax
			var lbls = [];
			for (var aa in data) {
				lbls.push(aa);
			}
			return lbls;
		}

		function getGlossaryItems(label) {
			//TODO leggere voci via ajax
			return data[label];
		}

		function appendGlossaryItems(items, sect) {
			for (var key in items) {
				var par = $("<p class='glossary-key-section'>");
				par.append( $("<span>").addClass("glossary-title").html(key) );

				if (items[key].caption) {
					par.append(" - " + items[key].caption);
				}
					
				par.append("<br>").append( items[key].description );

				if (items[key].ref) {
					par.append("<br>")
					for (var ii=0; ii<items[key].ref.length; ii++) {
						par.append( $("<a class='glossary-more'>").html(items[key].ref[ii][1]).attr("href", "?p=" + items[key].ref[ii][0]) );
					}
				}
				
				par.appendTo( sect );
			}			
		}

    	$(function(){

    		//leggo solo le etichette (A, B, C, ...) presenti nel glossario
    		var lbls = getGlossaryLabels();

			for (var ll=0; ll<lbls.length; ll++) {
				var lbl = lbls[ll];

				$(".glossary-labels").append(
					$("<a href='#'>").html(lbl).on("click show.glossary", function(event) {
						var lbl = $(this).html();

						//console.log(event.type, lbl);

						if (event.type == "click") {
							$(".glossary-labels a").removeClass("glossary-selected");
							$(this).addClass("glossary-selected");
							$(".glossary-content section").hide();
							$(".glossary-content").addClass("glossary-single");
						}

						var sect = $(".glossary-content section[data-glossary-group=\"" + lbl + "\"]");
						if (sect.attr("data-glossary-loaded") !== "true") {
							//recupero le voci per l'etichetta
							var items = getGlossaryItems(lbl);
							appendGlossaryItems(items, sect);

							sect.attr("data-glossary-loaded", "true");
						}
						sect.show();

						return false;
					})
				);

				//creo la sezione
				$("<section>").attr("data-glossary-group", lbl).attr("data-glossary-loaded", "false")
					.hide().append( $("<span>").addClass("glossary-key").html(lbl) )
					.appendTo( $(".glossary-content") );

			} //end for labels

			//etichette per vedere tutto
			var lall = $("<a href='#' class='all'><small>tutto</small></a>").click( function() {
				$(".glossary-labels a").removeClass("glossary-selected").trigger("show.glossary");
				$(".glossary-labels .all").addClass("glossary-selected");
				$(".glossary-content").removeClass("glossary-single");

				return false;
			});

			//$(".glossary-labels").append( lall ).prepend( lall.clone(true) );
			$(".glossary-labels").append( lall );

			//seleziono la prima (attenzione che non sia "tutti" altrimenti vengono letti tutti i dati)
			$(".glossary-labels a:first-child").trigger("click");
    	})
    </script>
  </body>
</html>

